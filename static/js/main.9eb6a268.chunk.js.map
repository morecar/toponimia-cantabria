{"version":3,"sources":["staticData/localization.js","components/SearchBar.js","components/SettingsTooltip.js","components/TagsContainer.js","components/MapMarker.js","staticData/constants.js","components/ResultsMap.js","components/ResultsPage.js","components/CaptureMap.js","App.js","model/configService.js","model/pointRepository.js","model/pointRepositoryFactory.js","staticData/googleCredentials.js","model/googleSheetsClient.js","index.js"],"names":["BRAND_NAME","ast","esp","BRAND_ALT","SEARCH_PLACEHOLDER","SearchBar","props","searchBar","React","createRef","state","tags","rawQuery","searchString","searchBoxContents","event","preventDefault","query","this","current","value","trim","onSearch","config","searchAutocompleteUnderdoth","regex","RegExp","replace","match","offset","string","startsWith","Form","inline","onSubmit","handleSearch","bind","FormControl","type","onChange","handleChange","placeholder","language","ref","Component","SettingsTooltip","target","id","checked","resultsTitle","resultsTags","resultsTypes","Array","from","Set","add","filter","e","searchAutocompleteTags","searchDisplayTagPalette","onSettingsUpdated","popOverProps","pointRepository","Popover","onClick","Content","Group","handleToggleChanged","Label","Check","defaultChecked","label","name","disabled","includes","TagsContainer","Tooltip","permanent","direction","className","Object","keys","map","key","Badge","variant","getLabel","tag","endsWith","split","pop","MapMarker","Marker","position","Popup","title","displayTags","CENTER_CANTABRIA","getCentroid","arr","reduce","x","y","length","ResultsMap","blackOptions","color","MapContainer","center","zoom","scrollWheelZoom","zoomControl","dragging","TileLayer","attribution","url","points","coordinates","polys","Polygon","pathOptions","positions","lines","Polyline","ResultsPage","search","displayLines","displayPolys","displayPoints","retultsToDisplay","console","log","setState","point","Container","Navbar","fixed","bg","expand","Brand","src","alt","Toggle","aria-controls","Collapse","Nav","updateResults","getAllTags","NavItem","OverlayTrigger","trigger","placement","overlay","handleSettingsUpdated","style","LocationMarker","useMapEvents","click","latlng","lat","lng","CaptureMap","searchBoxRef","newPoints","newPointsLength","dashArray","registerLocation","App","path","children","repository","ConfigService","localConfig","localStorage","getItem","JSON","parse","getDefaultConfig","saveToLocalStorage","lang","results_title","results_tags","results_types","search_autocomplete_underdoth","search_autocomplete_tags","search_display_tag_palette","setItem","stringify","newLanguage","newResultsTitle","newResultsTags","newResultsTypes","newSearchAutocompleteUnderdoth","newSearchAutocompleteTags","newSearchDisplayTagPalette","PointRepository","database","_","orderBy","pattern","sanitizeInput","searchPattern","preprocessPattern","entry","test","forEach","spreadsheet","a","shouldReload","hash","reloadLocalDatabase","sheet","buildRepositoryFromLocal","Promise","resolve","newHash","googleSheet","getRows","then","rows","remoteDatabase","row","pair","parseFloat","currentHash","reload","GOOGLE_SHEETS_API_KEY","GOOGLE_INFO_SHEET_CELL","doc","GoogleSpreadsheet","useApiKey","fetchSpreadSheet","loadInfo","sheetsByTitle","info_sheet","loadCells","getCellByA1","connectToSpreadSheet","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.9eb6a268.chunk.js","sourcesContent":["export const ROUTE_HOME = '/'\nexport const ROUTE_CAPTURE = '/nuivu'\n\nexport const NEW_MS = {ast: 'Nuivu', esp: 'Nuevo'}\nexport const BRAND_NAME = {ast: \"L'Unicurniu\", esp: \"L'Unicurniu\"}\nexport const BRAND_ALT = {ast: 'Imagin de cabeza di unicurniu', esp: 'Imagen de cabeza de unicornio'}\n\nexport const SEARCH_PLACEHOLDER = {ast: 'Búsqueda con regexp…', esp: 'Búsqueda con regexp…'}","import React, { Component} from 'react';\n\nimport Form from 'react-bootstrap/Form'\nimport FormControl from 'react-bootstrap/FormControl'\n\nimport {SEARCH_PLACEHOLDER} from '../staticData/localization'\n\nexport default class SearchBar extends Component {\n    constructor(props) {\n      super(props);\n      this.searchBar = React.createRef()\n  \n      this.state = {\n        tags: [],\n        rawQuery: \"\",\n        searchString: this.props.searchBoxContents\n      }\n    }\n    \n    handleSearch(event) {\n        event.preventDefault();\n        var query = this.searchBar.current.value.trim()\n        this.props.onSearch(query)\n    }\n\n    handleChange(event) {\n        if(this.props.config.searchAutocompleteUnderdoth) {\n            let regex = RegExp(/h\\.\\S/, 'i')\n            this.searchBar.current.value = this.searchBar.current.value.replace(regex, (match, offset, string) => {return match.startsWith('h') ? `ḥ${string[offset+2]}` : `Ḥ${[offset+2]}` })\n        }\n    }\n\n    render() {\n        return (\n            <div>\n                <Form inline onSubmit={this.handleSearch.bind(this)}>\n                    <FormControl type=\"text\" onChange={this.handleChange.bind(this)} placeholder={SEARCH_PLACEHOLDER[this.props.config.language]} ref={this.searchBar}/>\n                </Form>\n            </div>\n        )\n    }\n}","import React, { Component} from 'react';\n\nimport Form from 'react-bootstrap/Form'\nimport Popover from 'react-bootstrap/Popover'\n\nexport default class SettingsTooltip extends Component {\n\n\n    handleToggleChanged(event) {\n        if(event.target.id === 'show-title-always' && event.target.checked) this.props.config.resultsTitle = 'always'\n        if(event.target.id === 'show-title-search' && event.target.checked) this.props.config.resultsTitle = 'search'\n        if(event.target.id === 'show-title-never' && event.target.checked) this.props.config.resultsTitle = 'never'\n\n        if(event.target.id === 'show-tags-always' && event.target.checked) this.props.config.resultsTags = 'always'\n        if(event.target.id === 'show-tags-search' && event.target.checked) this.props.config.resultsTags = 'search'\n        if(event.target.id === 'show-tags-never' && event.target.checked) this.props.config.resultsTags = 'never'\n\n        if(event.target.id === 'toggle-points')\n            this.props.config.resultsTypes =  event.target.checked\n                                                    ? Array.from(new Set(this.props.config.resultsTypes).add('point'))\n                                                    : this.props.config.resultsTypes.filter(e => e!=='point')\n\n        if(event.target.id === 'toggle-lines')\n            this.props.config.resultsTypes =  event.target.checked \n                                                    ? Array.from(new Set(this.props.config.resultsTypes).add('line'))\n                                                    : this.props.config.resultsTypes.filter(e => e!=='line')\n\n        if(event.target.id === 'toggle-polygons')\n            this.props.config.resultsTypes =  event.target.checked \n                                                    ? Array.from(new Set(this.props.config.resultsTypes).add('poly'))\n                                                    : this.props.config.resultsTypes.filter(e => e!=='poly')\n\n        if(event.target.id === 'toggle-underdoth') this.props.config.searchAutocompleteUnderdoth = event.target.checked\n        if(event.target.id === 'toggle-tag-auto') this.props.config.searchAutocompleteTags = event.target.checked   \n        if(event.target.id === 'toggle-tag-palette') this.props.config.searchDisplayTagPalette = event.target.checked  \n        \n        this.props.onSettingsUpdated()\n    }\n\n    render() {\n        const { pointRepository, searchBoxContents, onSettingsUpdated, ...popOverProps} = this.props\n        return (         \n              <Popover {...popOverProps} onClick={(event)=>{}}>\n                <Popover.Content>\n                  <Form>\n                    <Form.Group onChange={this.handleToggleChanged.bind(this)}>\n                        <Form.Label><b>Veyer tupúnimu</b></Form.Label>\n                        <div>\n                            <Form.Check defaultChecked={this.props.config.resultsTitle === 'always'} label='Siempri' type='radio' id='show-title-always' name='showTitle' disabled/>\n                            <Form.Check defaultChecked={this.props.config.resultsTitle === 'search'} label='In búsquedas' type='radio' id='show-title-search' name='showTitle' disabled/>\n                            <Form.Check defaultChecked={this.props.config.resultsTitle === 'never'} label='In cliquiandu' type='radio' id='show-title-never' name='showTitle' disabled/>\n                        </div>\n                    </Form.Group>\n                    <Form.Group onChange={this.handleToggleChanged.bind(this)}>\n                        <Form.Label><b>Veyer etiquetas</b></Form.Label>\n                        <div>   \n                            <Form.Check defaultChecked={this.props.config.resultsTags === 'always'} label='Siempri' type='radio' id='show-tags-always' name='showTags'/>\n                            <Form.Check defaultChecked={this.props.config.resultsTags === 'search'} label='In búsquedas' type='radio' id='show-tags-search' name='showTags'/>\n                            <Form.Check defaultChecked={this.props.config.resultsTags === 'never'} label='Desactivás' type='radio' id='show-tags-never' name='showTags'/>\n                            \n                        </div>\n                    </Form.Group>\n                    <Form.Group onChange={this.handleToggleChanged.bind(this)}>\n                        <Form.Label><b>Clas de resultáus</b></Form.Label>\n                        <div>                          \n                            <Form.Check inline defaultChecked={this.props.config.resultsTypes.includes('point')} label='Puntualis' type={'checkbox'} id={'toggle-points'} />\n                            <Form.Check inline defaultChecked={this.props.config.resultsTypes.includes('line')} label='Linialis' type={'checkbox'} id={'toggle-lines'} disabled/>\n                            <Form.Check inline defaultChecked={this.props.config.resultsTypes.includes('poly')} label='Zonalis' type={'checkbox'}  id={'toggle-polygons'} disabled/>\n                        </div>\n                    </Form.Group>\n                    <Form.Group onChange={this.handleToggleChanged.bind(this)}>\n                        <Form.Label><b>Otrus</b></Form.Label>\n                        <Form.Check defaultChecked={this.props.config.searchAutocompleteUnderdoth} type='switch' id='toggle-underdoth' label='Detectar hachi supuntiá (h.→ḥ)'/>\n                        <Form.Check defaultChecked={this.props.config.searchAutocompleteTags} type='switch' id='toggle-tag-auto' label='Autucompletar etiquetas' disabled/>\n                        <Form.Check defaultChecked={this.props.config.searchDisplayTagPalette} type='switch' id='toggle-tag-palette' label='Veyer paleta etiquetas' disabled/>\n                    </Form.Group>\n                  </Form>\n                </Popover.Content>\n              </Popover>\n        )\n    }\n}\n\n","import {Tooltip} from 'react-leaflet'\nimport Badge from 'react-bootstrap/Badge'\n\nexport default function TagsContainer(props) {\n    return (\n        <Tooltip permanent={true} direction={'bottom'} offset={[-15, 20]} className={\"tagsContainer\"}>\n            {\n                Object.keys(props.tags).map(function(key) {\n                    return  <span key={key}><Badge variant={\"primary\"}>{getLabel(props.tags[key])}</Badge>{' '}</span>\n                })\n            }\n        </Tooltip>\n    );\n  }\n\nfunction getLabel(tag) {\n    if(tag.startsWith(\"etymology\")) {\n        if(tag.endsWith(\"celtic\")) return \"Et: Celta\"\n        if(tag.endsWith(\"romance\")) return \"Et: Romanci\"\n    }\n    if(tag.startsWith(\"phonology\")) {\n        if(tag.endsWith(\"metaphony_u\")) return \"Metafunía U\"\n        if(tag.endsWith(\"aspirate_f\")) return \"F aspiráu\"\n        if(tag.endsWith(\"b_g\")) return \"Cambiu B > G\"\n        if(tag.endsWith(\"lost_f\")) return \"F mudu\"\n    }\n\n    return tag.split(':').pop()\n} ","import { Marker, Popup} from 'react-leaflet'\n\nimport TagsContainer from './TagsContainer'\n\nexport default function MapMarker(props) {\n    return (\n        <Marker position={props.position}>\n            <Popup>{props.title}</Popup>\n            {props.displayTags?<TagsContainer tags={props.tags}/>:null}\n        </Marker>\n    );\n  }","export const CENTER_CANTABRIA = [43.19775063914452, -4.029390585676174]","import { MapContainer, TileLayer, Polyline, Polygon} from 'react-leaflet'\n\nimport MapMarker from './MapMarker';\n\nimport {CENTER_CANTABRIA} from '../staticData/constants'\n\nfunction getCentroid(arr) { \n    return arr.reduce(function (x,y) {\n        return [x[0] + y[0]/arr.length, x[1] + y[1]/arr.length] \n    }, [0,0]) \n}\n\nexport default function ResultsMap(props) {\n    const blackOptions = { color: 'black' }\n    return (\n        <MapContainer center={CENTER_CANTABRIA} zoom={10} scrollWheelZoom={true} zoomControl={false} dragging={true}>   \n          <TileLayer\n            attribution='&copy; <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\n            url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n          />\n          {\n            Object.keys(props.points).map(function(key) {\n              return <MapMarker displayTags={props.displayTags} key={key} position={props.points[key].coordinates[0]} {...props.points[key]}/>\n            })\n          }\n          {\n            Object.keys(props.polys).map(function(key) {\n              return <div key={key}>\n                      <Polygon pathOptions={blackOptions} positions={props.polys[key].coordinates} />\n                      <MapMarker displayTags={props.displayTags} key={key} position={getCentroid(props.polys[key].coordinates)} {...props.polys[key]}/>\n                    </div>\n            })\n          }\n          {\n            Object.keys(props.lines).map(function(key) {\n              return <div key={key}>\n                      <Polyline pathOptions={blackOptions} positions={props.lines[key].coordinates} />\n                      <MapMarker displayTags={props.displayTags} key={key} position={getCentroid(props.lines[key].coordinates)} {...props.lines[key]}/>\n                    </div>\n            })\n          }\n        </MapContainer>\n    );\n}","import React, { Component} from 'react';\n\nimport {Container, Navbar, Nav, NavItem, OverlayTrigger} from 'react-bootstrap';\nimport {Toggles} from 'react-bootstrap-icons';\n\nimport SearchBar from './SearchBar'\nimport SettingsTooltip from './SettingsTooltip'\n\nimport {BRAND_ALT, BRAND_NAME} from '../staticData/localization'\nimport ResultsMap from './ResultsMap';\n\nexport default class ResultsPage extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      search: this.props.searchBoxContents ? true : false,\n      displayTags: (this.props.config.resultsTags === 'always') || (this.props.config.resultsTags === 'search' && this.props.searchBoxContents),\n      displayLines: (this.props.config.resultsTypes.includes('line')),\n      displayPolys: (this.props.config.resultsTypes.includes('poly')),\n      displayPoints: (this.props.config.resultsTypes.includes('point')),\n      retultsToDisplay: this.props.pointRepository.search(this.props.searchBoxContents)\n    }\n  }\n\n  updateResults(searchString) {\n    console.log(`searchstring=${searchString} => search=${searchString ? true : false}`)\n    this.setState( {\n      search: searchString ? true : false,\n      displayTags: (this.props.config.resultsTags === 'always') || (this.props.config.resultsTags === 'search' && searchString ? true : false),\n      retultsToDisplay: this.props.pointRepository.search(searchString, false)\n    })\n  }\n\n  handleSettingsUpdated() {\n    this.setState(\n      {\n        displayTags: (this.props.config.resultsTags === 'always') || (this.props.config.resultsTags === 'search' && this.state.search),\n        displayLines: (this.props.config.resultsTypes.includes('line')),\n        displayPolys: (this.props.config.resultsTypes.includes('poly')),\n        displayPoints: (this.props.config.resultsTypes.includes('point')),\n      }\n    )\n  }\n\n  render() {\n    const points = this.state.displayPoints ? this.state.retultsToDisplay.filter(point => point.type === 'point') : []\n    const polys = this.state.displayPolys ? this.state.retultsToDisplay.filter(point => point.type === 'poly') : []\n    const lines = this.state.displayLines ? this.state.retultsToDisplay.filter(point => point.type === 'line') : []\n    return (\n      <Container>\n        <Navbar fixed=\"top\"  bg=\"dark\" expand=\"lg\" variant=\"dark\">\n          <Navbar.Brand>\n            <img src=\"./unicorn.png\" alt={BRAND_ALT[this.props.config.language]}/>\n          </Navbar.Brand> \n          <Navbar.Brand className={'main-brand'}>{BRAND_NAME[this.props.config.language]}</Navbar.Brand>\n          <Navbar.Toggle aria-controls=\"basic-navbar-nav\" />        \n          <Navbar.Collapse id=\"basic-navbar-nav\">\n            <Nav className=\"mr-auto\">\n              <SearchBar onSearch={this.updateResults.bind(this)} tags={this.props.pointRepository.getAllTags()} {...this.props}/>\n              <NavItem id=\"settings\">\n              <OverlayTrigger trigger=\"click\" placement={'bottom'} overlay={<SettingsTooltip  onSettingsUpdated={this.handleSettingsUpdated.bind(this)} {...this.props}/>}> \n                  <Toggles style={{'fontSize': 'xx-large'}}/>\n              </OverlayTrigger>\n              </NavItem>\n            </Nav>\n          </Navbar.Collapse>\n        </Navbar>\n        <ResultsMap points={points} lines={lines} polys={polys} displayTags={this.state.displayTags} {...this.props}/>\n      </Container>\n    );\n  }\n}\n\n","import React, { Component} from 'react';\n\nimport Container from 'react-bootstrap/Container'\nimport Navbar from 'react-bootstrap/Navbar'\nimport { MapContainer, TileLayer, Marker, useMapEvents, Polyline } from 'react-leaflet'\n\nimport {CENTER_CANTABRIA} from '../staticData/constants'\n\n\nfunction LocationMarker(props) {\n  useMapEvents({\n    click(event) {\n      const { lat, lng } = event.latlng;\n      props.onClick([lat, lng])\n    }\n  })\n}\n\nexport default class CaptureMap extends Component {\n  constructor(props) {\n    super(props);\n    this.searchBoxRef = React.createRef()\n\n    this.state = {\n      newPoints : []\n    }\n  }\n\n\n  registerLocation(position) {\n    this.setState({ newPoints: [...this.state.newPoints, position]})\n  }\n\n\n  render() {\n    const blackOptions = { color: 'black' }\n    const limeOptions = { color: 'black', dashArray: \"4\" }\n    const newPointsLength = this.state.newPoints.length-1\n    return (\n      <Container>\n        <MapContainer center={CENTER_CANTABRIA} zoom={10} scrollWheelZoom={true} zoomControl={false} dragging={true}>\n          <TileLayer\n            attribution='&copy; <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\n            url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n          />\n\n{\n            Object.keys(this.state.newPoints).map(function(key) {\n              return <Marker position={this.state.newPoints[key]} key={key}>\n              </Marker>\n            }.bind(this))\n           }\n\n        <Polyline pathOptions={blackOptions} positions={this.state.newPoints} />\n\n          {\n            this.state.newPoints.length > 2 \n            ? <Polyline pathOptions={limeOptions} positions={[this.state.newPoints[0], this.state.newPoints[newPointsLength]]} />\n            : null\n          }\n          <LocationMarker onClick={this.registerLocation.bind(this)}/>\n        </MapContainer>\n        <Navbar fixed=\"bottom\"  bg=\"dark\" expand=\"lg\" variant=\"dark\">\n          <Navbar.Brand>\n            <img src=\"./unicorn.png\" alt=\"Icunu di unicurniu encabritáu\"/>\n          </Navbar.Brand>          \n        </Navbar>\n      </Container>\n    );\n  }\n}","import './App.css';\n\nimport React from 'react';\n\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route\n} from \"react-router-dom\";\n\nimport ResultsPage from './components/ResultsPage'\nimport CaptureMap from './components/CaptureMap'\n\nimport {ROUTE_HOME, ROUTE_CAPTURE} from './staticData/localization.js'\n\nexport default function App(props) {\n    return (\n        <Router>\n            <Switch>\n                <Route path={ROUTE_CAPTURE} children={<CaptureMap pointRepository={props.repository} {...props} />} />\n                <Route path={ROUTE_HOME} children={<ResultsPage pointRepository={props.repository} searchBoxContents={\"\"} {...props} />} />\n            </Switch>\n        </Router>\n    )\n}\n\n\n\n\n","export default class ConfigService {\n    constructor() {\n        this.localConfig = localStorage.getItem(\"config\")\n        if(!this.localConfig) {\n            this.localConfig = this.getDefaultConfig()\n            this.saveToLocalStorage()\n        } else {\n            this.localConfig = JSON.parse(this.localConfig)\n        }\n    }\n\n    getDefaultConfig() {\n        return {\n            lang: 'ast',\n            results_title: 'never',\n            results_tags: 'search',\n            results_types: ['point'],\n            search_autocomplete_underdoth: true,\n            search_autocomplete_tags: false,\n            search_display_tag_palette: false\n          }\n    }\n\n    saveToLocalStorage() {\n        localStorage.setItem(\"config\", JSON.stringify(this.localConfig))\n    }\n\n    get language() {\n        return this.localConfig.lang\n    }\n\n    set language(newLanguage) {\n        this.localConfig.lang = newLanguage;\n        this.saveToLocalStorage()\n    }\n\n    get resultsTitle() {\n        return this.localConfig.results_title\n    }\n\n    set resultsTitle(newResultsTitle) {\n        this.localConfig.results_title = newResultsTitle;\n        this.saveToLocalStorage()\n    }\n\n    get resultsTags() {\n        return this.localConfig.results_tags\n    }\n\n    set resultsTags(newResultsTags) {\n        this.localConfig.results_tags = newResultsTags;\n        this.saveToLocalStorage()\n    }\n\n    get resultsTypes() {\n        return this.localConfig.results_types\n    }\n\n    set resultsTypes(newResultsTypes) {\n        this.localConfig.results_types = newResultsTypes;\n        this.saveToLocalStorage()\n    }\n\n    get searchAutocompleteUnderdoth() {\n        return this.localConfig.search_autocomplete_underdoth\n    }\n\n    set searchAutocompleteUnderdoth(newSearchAutocompleteUnderdoth) {\n        this.localConfig.search_autocomplete_underdoth = newSearchAutocompleteUnderdoth;\n        this.saveToLocalStorage()\n    }\n\n    get searchAutocompleteTags() {\n        return this.localConfig.search_autocomplete_tags\n    }\n\n    set searchAutocompleteTags(newSearchAutocompleteTags) {\n        this.localConfig.search_autocomplete_tags = newSearchAutocompleteTags;\n        this.saveToLocalStorage()\n    }\n\n    get searchDisplayTagPalette() {\n        return this.localConfig.search_display_tag_palette\n    }\n\n    set searchDisplayTagPalette(newSearchDisplayTagPalette) {\n        this.localConfig.search_display_tag_palette = newSearchDisplayTagPalette;\n        this.saveToLocalStorage()\n    }\n}","import _ from 'lodash'\n\nexport default class PointRepository {\n\n    constructor(database) {\n        this.database = _(database).orderBy(['title'])\n    }\n\n    search(pattern, sanitizeInput=true) {\n        var searchPattern = sanitizeInput ? this.preprocessPattern(pattern) : pattern\n        let regex = RegExp(searchPattern, 'i')\n\n        return this.database.filter(entry => regex.test(entry.title)).value()\n    }\n\n    getAllTags() {\n        let tags = new Set()\n        this.database.map(entry => entry.tags).forEach(tag => tags.add(tag))\n        return Array.from(tags)\n    }\n\n    preprocessPattern(pattern){\n        var temp = pattern.replace(\"a\", \"([áa])\")\n                            .replace(\"e\", \"([ée])\")\n                            .replace(\"i\", \"([íi])\")\n                            .replace(\"o\", \"([óo])\")\n                            .replace(\"u\", \"([úu])\")\n        return temp;\n    }\n}","import PointRepository from './pointRepository'\n\n\nexport async function buildRepositoryFromSheet(spreadsheet) {\n    if (shouldReload(spreadsheet.hash)) reloadLocalDatabase(spreadsheet.hash, spreadsheet.sheet)\n  \n    return buildRepositoryFromLocal()\n}\n\n\nasync function buildRepositoryFromLocal() {\n    return Promise.resolve(new PointRepository(JSON.parse(localStorage.getItem(\"localIndex\"))))\n}\n\nasync function reloadLocalDatabase(newHash, googleSheet) {\n    googleSheet.getRows().then(rows => {\n        const remoteDatabase = rows.map(row => ({ title: row.name, type: row.type, coordinates: row.coordinates.trim().split(';').map(pair => pair.trim().split(',').map(parseFloat)), tags: row.tags.split(',')}))\n        localStorage.setItem(\"localIndex\", JSON.stringify(remoteDatabase) )\n        localStorage.setItem(\"localIndexHash\", newHash)\n\n        console.log(`Database: updated to ${newHash}`)\n    })\n}\n\nfunction shouldReload(newHash) {\n    const currentHash = localStorage.getItem(\"localIndexHash\")\n\n    const reload = newHash !== currentHash\n\n    console.log(`Database: current is ${currentHash}, reload=${reload}`)\n    return reload\n}","export const GOOGLE_SHEETS_API_KEY = 'AIzaSyBl_GJjcKmg4Lk0dWPLzGX6bXpT0vXW5R0'\n\nexport const GOOGLE_DOC_ID = '1Rd8TQOp2hSBOxhSeAaLeb_faICF2_oAv2-jtn2vgXrY'\nexport const GOOGLE_DB_SHEET_TITLE = 'DB'\nexport const GOOGLE_INFO_SHEET_TITLE = 'INFO'\nexport const GOOGLE_INFO_SHEET_CELL = 'A1'\n\n","import { GoogleSpreadsheet } from 'google-spreadsheet';\nimport { GOOGLE_DOC_ID, GOOGLE_DB_SHEET_TITLE, GOOGLE_INFO_SHEET_TITLE, GOOGLE_INFO_SHEET_CELL, GOOGLE_SHEETS_API_KEY } from '../staticData/googleCredentials'\n\nconst doc = new GoogleSpreadsheet(GOOGLE_DOC_ID);\n\nexport async function connectToSpreadSheet(){\n    await doc.useApiKey(GOOGLE_SHEETS_API_KEY)\n    return fetchSpreadSheet()\n}\n\nasync function fetchSpreadSheet() {\n  await doc.loadInfo(); \n  console.log(`Spreadsheets: loaded document ${doc.title}`);\n\n  const info_sheet = await doc.sheetsByTitle[GOOGLE_INFO_SHEET_TITLE]\n  await info_sheet.loadCells(`${GOOGLE_INFO_SHEET_CELL}:${GOOGLE_INFO_SHEET_CELL}`)\n  \n  return  {\n            hash: info_sheet.getCellByA1(GOOGLE_INFO_SHEET_CELL).value,\n            sheet: await doc.sheetsByTitle[GOOGLE_DB_SHEET_TITLE]\n          }\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport App from './App';\nimport ConfigService from './model/configService'\n\nimport { buildRepositoryFromSheet } from './model/pointRepositoryFactory'\nimport { connectToSpreadSheet } from './model/googleSheetsClient'\n\n\nfunction startApp(repository) {\n  var config = new ConfigService()\n  ReactDOM.render(\n    // <React.StrictMode>\n      <App config={config} repository={repository}/>,\n    // </React.StrictMode>,\n    document.getElementById('root')\n  );\n}\n\nconnectToSpreadSheet().then(buildRepositoryFromSheet).then(startApp)\n\n"],"sourceRoot":""}