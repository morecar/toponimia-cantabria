(this["webpackJsonptoponimia-cantabria"]=this["webpackJsonptoponimia-cantabria"]||[]).push([[0],{141:function(e,t){},265:function(e,t,s){},318:function(e,t){},320:function(e,t){},329:function(e,t){},331:function(e,t){},357:function(e,t){},358:function(e,t){},363:function(e,t){},365:function(e,t){},372:function(e,t){},391:function(e,t){},452:function(e,t,s){"use strict";s.r(t);var a=s(0),n=s.n(a),i=s(32),r=s.n(i),o=s(14),c=(s(265),s(259)),l=s(18),h=s(23),u=s(24),p=s(47),g=s(46),d=s(254),f=s(147),b=s(468),j=s(256),y=s(467),O=s(465),x=s(15),m=s(100),k={ast:"L'Unicurniu",esp:"L'Unicurniu"},T={ast:"Imagin de cabeza di unicurniu",esp:"Imagen de cabeza de unicornio"},v={ast:"Iscribi la tu b\xfasqueda\u2026",esp:"Escribe tu b\xfasqueda\u2026"},w={ast:"B\xfasqueda con regexp\u2026",esp:"B\xfasqueda con regexp\u2026"},C=s(2),_=function(e){Object(p.a)(s,e);var t=Object(g.a)(s);function s(e){var a;return Object(h.a)(this,s),(a=t.call(this,e)).searchBar=n.a.createRef(),a.state={tags:[],rawQuery:"",searchString:a.props.searchBoxContents},a}return Object(u.a)(s,[{key:"handleSearch",value:function(e){e.preventDefault();var t=this.searchBar.current.value.trim();this.props.onSearch(t)}},{key:"handleChange",value:function(e){if(this.props.config.searchAutocompleteUnderdoth){var t=RegExp(/h\.\S/,"i");this.searchBar.current.value=this.searchBar.current.value.replace(t,(function(e,t,s){return e.startsWith("h")?"\u1e25".concat(s[t+2]):"\u1e24".concat([t+2])}))}}},{key:"render",value:function(){return Object(C.jsx)("div",{children:Object(C.jsx)(x.a,{inline:!0,onSubmit:this.handleSearch.bind(this),children:Object(C.jsx)(m.a,{type:"text",onChange:this.handleChange.bind(this),placeholder:this.props.regex?w[this.props.config.language]:v[this.props.config.language],ref:this.searchBar})})})}}]),s}(a.Component),S=s(31),B=s(148),L=function(e){Object(p.a)(s,e);var t=Object(g.a)(s);function s(){return Object(h.a)(this,s),t.apply(this,arguments)}return Object(u.a)(s,[{key:"handleToggleChanged",value:function(e){"show-title-always"===e.target.id&&e.target.checked&&(this.props.config.resultsTitle="always"),"show-title-search"===e.target.id&&e.target.checked&&(this.props.config.resultsTitle="search"),"show-title-never"===e.target.id&&e.target.checked&&(this.props.config.resultsTitle="never"),"show-tags-always"===e.target.id&&e.target.checked&&(this.props.config.resultsTags="always"),"show-tags-search"===e.target.id&&e.target.checked&&(this.props.config.resultsTags="search"),"show-tags-never"===e.target.id&&e.target.checked&&(this.props.config.resultsTags="never"),"toggle-points"===e.target.id&&(this.props.config.resultsTypes=e.target.checked?Array.from(new Set(this.props.config.resultsTypes).add("point")):this.props.config.resultsTypes.filter((function(e){return"point"!==e}))),"toggle-lines"===e.target.id&&(this.props.config.resultsTypes=e.target.checked?Array.from(new Set(this.props.config.resultsTypes).add("line")):this.props.config.resultsTypes.filter((function(e){return"line"!==e}))),"toggle-polygons"===e.target.id&&(this.props.config.resultsTypes=e.target.checked?Array.from(new Set(this.props.config.resultsTypes).add("poly")):this.props.config.resultsTypes.filter((function(e){return"poly"!==e}))),"toggle-regex"===e.target.id&&(this.props.config.searchUseRegex=e.target.checked),"toggle-underdoth"===e.target.id&&(this.props.config.searchAutocompleteUnderdoth=e.target.checked),"toggle-tag-auto"===e.target.id&&(this.props.config.searchAutocompleteTags=e.target.checked),"toggle-tag-palette"===e.target.id&&(this.props.config.searchDisplayTagPalette=e.target.checked),this.props.onSettingsUpdated()}},{key:"render",value:function(){var e=this.props,t=(e.repository,e.searchBoxContents,e.onSettingsUpdated,Object(S.a)(e,["repository","searchBoxContents","onSettingsUpdated"]));return Object(C.jsx)(B.a,Object(o.a)(Object(o.a)({},t),{},{children:Object(C.jsx)(B.a.Content,{children:Object(C.jsxs)(x.a,{children:[Object(C.jsxs)(x.a.Group,{onChange:this.handleToggleChanged.bind(this),children:[Object(C.jsx)(x.a.Label,{children:Object(C.jsx)("b",{children:"Veyer tup\xfanimu"})}),Object(C.jsxs)("div",{children:[Object(C.jsx)(x.a.Check,{defaultChecked:"always"===this.props.config.resultsTitle,label:"Siempri",type:"radio",id:"show-title-always",name:"showTitle",disabled:!0}),Object(C.jsx)(x.a.Check,{defaultChecked:"search"===this.props.config.resultsTitle,label:"In b\xfasquedas",type:"radio",id:"show-title-search",name:"showTitle",disabled:!0}),Object(C.jsx)(x.a.Check,{defaultChecked:"never"===this.props.config.resultsTitle,label:"In cliquiandu",type:"radio",id:"show-title-never",name:"showTitle",disabled:!0})]})]}),Object(C.jsxs)(x.a.Group,{onChange:this.handleToggleChanged.bind(this),children:[Object(C.jsx)(x.a.Label,{children:Object(C.jsx)("b",{children:"Veyer etiquetas"})}),Object(C.jsxs)("div",{children:[Object(C.jsx)(x.a.Check,{defaultChecked:"always"===this.props.config.resultsTags,label:"Siempri",type:"radio",id:"show-tags-always",name:"showTags"}),Object(C.jsx)(x.a.Check,{defaultChecked:"search"===this.props.config.resultsTags,label:"In b\xfasquedas",type:"radio",id:"show-tags-search",name:"showTags"}),Object(C.jsx)(x.a.Check,{defaultChecked:"never"===this.props.config.resultsTags,label:"Desactiv\xe1s",type:"radio",id:"show-tags-never",name:"showTags"})]})]}),Object(C.jsxs)(x.a.Group,{onChange:this.handleToggleChanged.bind(this),children:[Object(C.jsx)(x.a.Label,{children:Object(C.jsx)("b",{children:"Clas de result\xe1us"})}),Object(C.jsxs)("div",{children:[Object(C.jsx)(x.a.Check,{inline:!0,defaultChecked:this.props.config.resultsTypes.includes("point"),label:"Puntualis",type:"checkbox",id:"toggle-points"}),Object(C.jsx)(x.a.Check,{inline:!0,defaultChecked:this.props.config.resultsTypes.includes("line"),label:"Linialis",type:"checkbox",id:"toggle-lines",disabled:!0}),Object(C.jsx)(x.a.Check,{inline:!0,defaultChecked:this.props.config.resultsTypes.includes("poly"),label:"Zonalis",type:"checkbox",id:"toggle-polygons",disabled:!0})]})]}),Object(C.jsxs)(x.a.Group,{onChange:this.handleToggleChanged.bind(this),children:[Object(C.jsx)(x.a.Label,{children:Object(C.jsx)("b",{children:"Otrus"})}),Object(C.jsx)(x.a.Check,{defaultChecked:this.props.config.searchUseRegex,type:"switch",id:"toggle-regex",label:"B\xfasqueda con regex"}),Object(C.jsx)(x.a.Check,{defaultChecked:this.props.config.searchAutocompleteUnderdoth,type:"switch",id:"toggle-underdoth",label:"Detectar hachi supunti\xe1 (h.\u2192\u1e25)"}),Object(C.jsx)(x.a.Check,{defaultChecked:this.props.config.searchAutocompleteTags,type:"switch",id:"toggle-tag-auto",label:"Autucompletar etiquetas",disabled:!0}),Object(C.jsx)(x.a.Check,{defaultChecked:this.props.config.searchDisplayTagPalette,type:"switch",id:"toggle-tag-palette",label:"Veyer paleta etiquetas",disabled:!0})]})]})})}))}}]),s}(a.Component),A=s(462),I=s(469),P=s(463),R=s(464),U=s(460),D=s(461),W=s(459),q=s(253);function z(e){return Object(C.jsx)(W.a,{permanent:!0,direction:"bottom",offset:[-15,20],className:"tagsContainer",children:Object.keys(e.tags).map((function(t){return Object(C.jsxs)("span",{children:[Object(C.jsx)(q.a,{variant:"primary",children:F(e.tags[t])})," "]},t)}))})}function F(e){if(e.startsWith("etymology")){if(e.endsWith("celtic"))return"Et: Celta";if(e.endsWith("romance"))return"Et: Romanci"}if(e.startsWith("phonology")){if(e.endsWith("metaphony_u"))return"Metafun\xeda U";if(e.endsWith("aspirate_f"))return"F aspir\xe1u";if(e.endsWith("b_g"))return"Cambiu B > G";if(e.endsWith("lost_f"))return"F mudu"}return e.split(":").pop()}function E(e){return Object(C.jsxs)(U.a,{position:e.position,children:[Object(C.jsx)(D.a,{children:e.title}),e.displayTags?Object(C.jsx)(z,{tags:e.tags}):null]})}var G=[43.19775063914452,-4.029390585676174];function N(e){return e.reduce((function(t,s){return[t[0]+s[0]/e.length,t[1]+s[1]/e.length]}),[0,0])}function J(e){var t={color:"black"};return Object(C.jsxs)(A.a,{center:G,zoom:10,scrollWheelZoom:!0,zoomControl:!1,dragging:!0,children:[Object(C.jsx)(I.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),Object.keys(e.points).map((function(t){return Object(C.jsx)(E,Object(o.a)({displayTags:e.displayTags,position:e.points[t].coordinates[0]},e.points[t]),t)})),Object.keys(e.polys).map((function(s){return Object(C.jsxs)("div",{children:[Object(C.jsx)(P.a,{pathOptions:t,positions:e.polys[s].coordinates}),Object(C.jsx)(E,Object(o.a)({displayTags:e.displayTags,position:N(e.polys[s].coordinates)},e.polys[s]),s)]},s)})),Object.keys(e.lines).map((function(s){return Object(C.jsxs)("div",{children:[Object(C.jsx)(R.a,{pathOptions:t,positions:e.lines[s].coordinates}),Object(C.jsx)(E,Object(o.a)({displayTags:e.displayTags,position:N(e.lines[s].coordinates)},e.lines[s]),s)]},s)}))]})}var M=function(e){Object(p.a)(s,e);var t=Object(g.a)(s);function s(e){var a;return Object(h.a)(this,s),(a=t.call(this,e)).state={search:!!a.props.searchBoxContents,displayTags:"always"===a.props.config.resultsTags||"search"===a.props.config.resultsTags&&a.props.searchBoxContents,displayLines:a.props.config.resultsTypes.includes("line"),displayPolys:a.props.config.resultsTypes.includes("poly"),displayPoints:a.props.config.resultsTypes.includes("point"),retultsToDisplay:a.props.repository.search(a.props.searchBoxContents),useRegex:a.props.config.searchUseRegex},a}return Object(u.a)(s,[{key:"updateResults",value:function(e){this.setState({search:!!e,displayTags:"always"===this.props.config.resultsTags||!("search"!==this.props.config.resultsTags||!e),retultsToDisplay:this.props.repository.search(e,this.props.config.searchUseRegex)})}},{key:"handleSettingsUpdated",value:function(){this.setState({displayTags:"always"===this.props.config.resultsTags||"search"===this.props.config.resultsTags&&this.state.search,displayLines:this.props.config.resultsTypes.includes("line"),displayPolys:this.props.config.resultsTypes.includes("poly"),displayPoints:this.props.config.resultsTypes.includes("point"),useRegex:this.props.config.searchUseRegex})}},{key:"render",value:function(){var e=this.state.displayPoints?this.state.retultsToDisplay.filter((function(e){return"point"===e.type})):[],t=this.state.displayPolys?this.state.retultsToDisplay.filter((function(e){return"poly"===e.type})):[],s=this.state.displayLines?this.state.retultsToDisplay.filter((function(e){return"line"===e.type})):[];return Object(C.jsxs)(d.a,{children:[Object(C.jsxs)(f.a,{fixed:"top",bg:"dark",expand:"lg",variant:"dark",children:[Object(C.jsx)(f.a.Brand,{children:Object(C.jsx)("img",{src:"./unicorn.png",alt:T[this.props.config.language]})}),Object(C.jsx)(f.a.Brand,{className:"main-brand",children:k[this.props.config.language]}),Object(C.jsx)(f.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(C.jsx)(f.a.Collapse,{id:"basic-navbar-nav",children:Object(C.jsxs)(b.a,{className:"mr-auto",children:[Object(C.jsx)(_,Object(o.a)({onSearch:this.updateResults.bind(this),tags:this.props.repository.getAllTags(),regex:this.state.useRegex},this.props)),Object(C.jsx)(j.a,{id:"settings",children:Object(C.jsx)(y.a,{trigger:"click",placement:"bottom",overlay:Object(C.jsx)(L,Object(o.a)({onSettingsUpdated:this.handleSettingsUpdated.bind(this)},this.props)),children:Object(C.jsx)(O.a,{style:{fontSize:"xx-large"}})})})]})})]}),Object(C.jsx)(J,Object(o.a)({points:e,lines:s,polys:t,displayTags:this.state.displayTags},this.props))]})}}]),s}(a.Component),X=s(260),V=s(466);function Z(e){Object(V.a)({click:function(t){var s=t.latlng,a=s.lat,n=s.lng;e.onClick([a,n])}})}var H=function(e){Object(p.a)(s,e);var t=Object(g.a)(s);function s(e){var a;return Object(h.a)(this,s),(a=t.call(this,e)).searchBoxRef=n.a.createRef(),a.state={newPoints:[]},a}return Object(u.a)(s,[{key:"registerLocation",value:function(e){this.setState({newPoints:[].concat(Object(X.a)(this.state.newPoints),[e])})}},{key:"render",value:function(){var e=this.state.newPoints.length-1;return Object(C.jsxs)(d.a,{children:[Object(C.jsxs)(A.a,{center:G,zoom:10,scrollWheelZoom:!0,zoomControl:!1,dragging:!0,children:[Object(C.jsx)(I.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),Object.keys(this.state.newPoints).map(function(e){return Object(C.jsx)(U.a,{position:this.state.newPoints[e]},e)}.bind(this)),Object(C.jsx)(R.a,{pathOptions:{color:"black"},positions:this.state.newPoints}),this.state.newPoints.length>2?Object(C.jsx)(R.a,{pathOptions:{color:"black",dashArray:"4"},positions:[this.state.newPoints[0],this.state.newPoints[e]]}):null,Object(C.jsx)(Z,{onClick:this.registerLocation.bind(this)})]}),Object(C.jsx)(f.a,{fixed:"bottom",bg:"dark",expand:"lg",variant:"dark",children:Object(C.jsx)(f.a.Brand,{children:Object(C.jsx)("img",{src:"./unicorn.png",alt:"Icunu di unicurniu encabrit\xe1u"})})})]})}}]),s}(a.Component);function K(e){return Object(C.jsx)(c.a,{children:Object(C.jsxs)(l.c,{children:[Object(C.jsx)(l.a,{path:"/nuivu",children:Object(C.jsx)(H,Object(o.a)({repository:e.repository},e))}),Object(C.jsx)(l.a,{path:"/",children:Object(C.jsx)(M,Object(o.a)({repository:e.repository,searchBoxContents:""},e))})]})})}var Q=s(56),$="config",Y={lang:"ast",results_title:"never",results_tags:"search",results_types:["point"],search_use_regex:!0,search_autocomplete_underdoth:!0,search_autocomplete_tags:!1,search_display_tag_palette:!1},ee=function(){function e(t){Object(h.a)(this,e),Object.entries(Y).forEach((function(e){var s,a=Object(Q.a)(e,2),n=a[0],i=a[1];return t[n]=null!==(s=t[n])&&void 0!==s?s:i})),this.config=t}return Object(u.a)(e,[{key:"writeToLocalStorage",value:function(){localStorage.setItem($,JSON.stringify(this._config))}},{key:"config",set:function(e){this._config=e,this.writeToLocalStorage()}},{key:"language",get:function(){return this._config.lang},set:function(e){this._config.lang=e,this.writeToLocalStorage()}},{key:"resultsTitle",get:function(){return this._config.results_title},set:function(e){this._config.results_title=e,this.writeToLocalStorage()}},{key:"resultsTags",get:function(){return this._config.results_tags},set:function(e){this._config.results_tags=e,this.writeToLocalStorage()}},{key:"resultsTypes",get:function(){return this._config.results_types},set:function(e){this._config.results_types=e,this.writeToLocalStorage()}},{key:"searchAutocompleteUnderdoth",get:function(){return this._config.search_autocomplete_underdoth},set:function(e){this._config.search_autocomplete_underdoth=e,this.writeToLocalStorage()}},{key:"searchAutocompleteTags",get:function(){return this._config.search_autocomplete_tags},set:function(e){this._config.search_autocomplete_tags=e,this.writeToLocalStorage()}},{key:"searchDisplayTagPalette",get:function(){return this._config.search_display_tag_palette},set:function(e){this._config.search_display_tag_palette=e,this.writeToLocalStorage()}},{key:"searchUseRegex",get:function(){return this._config.search_use_regex},set:function(e){this._config.search_use_regex=e,this.writeToLocalStorage()}}],[{key:"readFromLocalStorage",value:function(){var t;return new e(JSON.parse(null!==(t=localStorage.getItem($))&&void 0!==t?t:"{}"))}}]),e}(),te=s(13),se=s.n(te),ae=s(85),ne=s(258),ie="A1",re=function(){function e(){Object(h.a)(this,e)}return Object(u.a)(e,null,[{key:"load",value:function(){var e=Object(ae.a)(se.a.mark((function e(){var t,s;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.connect(),e.next=3,t.loadInfo();case 3:return console.log("Spreadsheets: loaded document ".concat(t.title)),e.next=6,t.sheetsByTitle.INFO;case 6:return s=e.sent,e.next=9,s.loadCells("".concat(ie,":").concat(ie));case 9:return e.t0=s.getCellByA1(ie).value,e.next=12,t.sheetsByTitle.DB;case 12:return e.t1=e.sent,e.abrupt("return",{hash:e.t0,sheet:e.t1});case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"connect",value:function(){var e=new ne.GoogleSpreadsheet("1Rd8TQOp2hSBOxhSeAaLeb_faICF2_oAv2-jtn2vgXrY");return e.useApiKey("AIzaSyBl_GJjcKmg4Lk0dWPLzGX6bXpT0vXW5R0"),e}}]),e}(),oe=s(68),ce=s.n(oe);function le(){return(le=Object(ae.a)(se.a.mark((function e(t){return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!ge(t.hash)){e.next=3;break}return e.next=3,ue(t.hash,t.sheet);case 3:return e.abrupt("return",he());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function he(){return new de(JSON.parse(localStorage.getItem("localIndex")))}function ue(e,t){return pe.apply(this,arguments)}function pe(){return(pe=Object(ae.a)(se.a.mark((function e(t,s){return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",s.getRows().then((function(e){var s=e.map((function(e){return{title:e.name,type:e.type,coordinates:e.coordinates.trim().split(";").map((function(e){return e.trim().split(",").map(parseFloat)})),tags:e.tags.split(",")}}));localStorage.setItem("localIndex",JSON.stringify(s)),localStorage.setItem("localIndexHash",t),console.log("Database: updated to ".concat(t))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ge(e){var t=localStorage.getItem("localIndexHash"),s=e!==t;return console.log("Database: current is ".concat(t,", reload=").concat(s)),s}var de=function(){function e(t){Object(h.a)(this,e),this.database=ce()(t).orderBy(["title"])}return Object(u.a)(e,[{key:"search",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=t?e:e.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&");a=s?this.accountForMissingAccents(a):a;var n=RegExp(a,"i");return this.database.filter((function(e){return n.test(e.title)})).value()}},{key:"getAllTags",value:function(){var e=new Set;return this.database.map((function(e){return e.tags})).forEach((function(t){return e.add(t)})),Array.from(e)}},{key:"accountForMissingAccents",value:function(e){return e.replace("a","([\xe1a])").replace("e","([\xe9e])").replace("i","([\xedi])").replace("o","([\xf3o])").replace("u","([\xfau])")}}]),e}();re.load().then((function(e){return le.apply(this,arguments)}),he).then((function(e){var t=ee.readFromLocalStorage();r.a.render(Object(C.jsx)(K,{config:t,repository:e}),document.getElementById("root"))}))}},[[452,1,2]]]);
//# sourceMappingURL=main.aee8a0b5.chunk.js.map