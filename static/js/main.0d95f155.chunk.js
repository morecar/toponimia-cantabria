(this["webpackJsonptoponimia-cantabria"]=this["webpackJsonptoponimia-cantabria"]||[]).push([[0],{115:function(t,e){},235:function(t,e,n){},236:function(t,e,n){},285:function(t,e){},287:function(t,e){},296:function(t,e){},298:function(t,e){},324:function(t,e){},325:function(t,e){},330:function(t,e){},332:function(t,e){},339:function(t,e){},358:function(t,e){},419:function(t,e,n){"use strict";n.r(e);var r=n(11),a=n.n(r),o=n(65),i=n(0),c=n.n(i),s=n(32),u=n.n(s),l=(n(235),n(48)),p=n(49),h=n(228),f=n(227),g=(n(236),n(224)),b=n(119),d=n(226),O=n(79),j=n(422),v=n(425),y=n(423),x=n(424),m=n(18),S=[43.19775063914452,-4.029390585676174],B=function(t){Object(h.a)(n,t);var e=Object(f.a)(n);function n(t){var r;return Object(l.a)(this,n),(r=e.call(this,t)).searchBoxRef=c.a.createRef(),r.state={points:r.props.pointRepository.search(r.props.searchBoxContents)},r}return Object(p.a)(n,[{key:"handleSearch",value:function(t){t.preventDefault();var e=this.searchBoxRef.current.value;this.setState({points:this.props.pointRepository.search(e)})}},{key:"render",value:function(){return Object(m.jsxs)(g.a,{children:[Object(m.jsxs)(b.a,{fixed:"top",bg:"dark",expand:"lg",variant:"dark",children:[Object(m.jsx)(b.a.Brand,{children:Object(m.jsx)("img",{src:"unicorn.png",alt:"Icunu di unicurniu encabrit\xe1u"})}),Object(m.jsx)(d.a,{inline:!0,onSubmit:this.handleSearch.bind(this),children:Object(m.jsx)(O.a,{type:"text",placeholder:"B\xfasqueda con regexp...",ref:this.searchBoxRef})})]}),Object(m.jsxs)(j.a,{center:S,zoom:10,scrollWheelZoom:!0,zoomControl:!1,dragging:!0,children:[Object(m.jsx)(v.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),Object.keys(this.state.points).map(function(t){return Object(m.jsx)(y.a,{position:this.state.points[t].position,children:Object(m.jsx)(x.a,{children:this.state.points[t].title})},t)}.bind(this))]})]})}}]),n}(i.Component),w=n(225),k="-----BEGIN PRIVATE KEY-----\nMIIEvgIBADANBgkqhkiG9w0BAQEFAASCBKgwggSkAgEAAoIBAQCefG9PkQxq9Q8d\noEF/alj8V5RY64c1ozOBZ6E1q55/u/3jrqn4I0raEzk2STOW4brhZsovCgUepZjY\nMSb6oDyTzsBP4rXQWUM3HaZoAJRFQBx92FsFHkZSOSliIQt02oJWzDJ1P/U1DtKp\nZHLTT3drO6wZx7T33WSIiEaWBvcxNbHFNxbGeE0g3I2HnORh4qtaTUMQZzE4nhnM\nVmhsfesfkhah02SULQTWCjDprNShMFuUrIQfpmLmdLsOF8gbY/11WyYh9c/y2xSW\ncenzkrFqbjM6wMgjrmIJFg6Mn67GVHBqqbl/3lgqKHz/0lRTFZZ4tOnnmOt26DyO\nGj8QWm9tAgMBAAECggEAFB3KSSipkVfqo8GIHsKiaeE58LFwl5PQAVBki3nto9v6\nRXCRnW/pW9XN0MCo3jFntZ2E80SL0tCFHofaoTw+hCpdiaZGmpwB5piKWzAbodCZ\n7TVNlFA778rWoGB+YkYr/hVsICrOln37qkmYM48mIsPPu/P32fBNhvD5OKjIroOl\neON/OO/0ABPr4XL26Jjw5pDYv+Gw5h9Y9ktg9P7HdPpP8J9tPyN5fidwDwtfqxqW\nnH5cP4JNlPvzRlOb6rpqD4iZPKa0Zc1Yb96HVqwlVtoXGU+Bqsxx8mq0yzNNZEUe\nEKuH1YASufnTLb0Yek8kY16tGTpAnK7MbwDDbxwykQKBgQDYgZG7hmyPSG2zAdZO\nVgKCr7yMLW5hE7+yIGksoHBsi6MvewwCHUiijayKR7ndIjLdTJpisGAePduiSlyX\nVwTvQH/8L/WuOFhRk20fmaUcB7XdsJNOHg2AnEZJIEl2ECRWajy1WVqBZja2T2HO\nx4u9yTiYsxtYXRqtnwKmfmoMJQKBgQC7ZXAFNLcg1OGFjrCWJvZJNdwWZ40vXe7Z\n+upBjku8535sdFXcSMzSYDfqG1uQTxTUT1Wknb4p98+y2GpaYSyLkbLfEAXqeOQ3\n13VEDzEmMkhgg5auUHggkFIsPp4vfg3uZnzJxQ3bWW5ss6mWOlnU6ktTIaVDfQn7\nJOlEOGVPqQKBgBDRh+OcXqSGyNbGBsLRFaLXSftNsCxkX1jUAbeQwwr7kfKnSViE\ns9bE0KlxRvPxqyfbwoZ2ExFmVsB1rFmpTd3UEd0iUKB3Cg1UOX7h7ZyO0Mbm55qC\n5SOfgCpAEtTUDi6UVCD2TvyMVyW0ZvGsOKPGlNnv1+j2WpMwLgGHAm/tAoGBAKtl\n3g2E57JJw3PKzMypGj5f2stLLyERwzLwgm4vXiqLeWBtD1MJ6vzIMJwZJahaDG0b\nmvOTq6jrFbc4ph3AH2QQgQ/wsdiBdgt1L7ZuRr/u4bAU6y7IPvdZyS7anwhFPSy9\n5IkPiNsFczBNK2FSQXOyT+7bKTMPHJ/uZMSW6GLxAoGBANAkSdBjQ4f60eydWGUE\n2oQwp+PK6RCKUiKYavZ3LvTYbkXK1xIqG9YCSPYtrpbmJ1to8qR7dEnTrheq5wKU\nnscmiIABU791zvT1SwHyOj2lfa4TtX0F5qA4Xv2pxe0vkFXov3ayTNQqELBOsT3w\n1UA4jtC7veJBnOIX3f7aPknP\n-----END PRIVATE KEY-----\n",A="place-names-of-cantabria@toponymy-cantabria.iam.gserviceaccount.com",I=n(47),E=n.n(I),P=function(){function t(e){Object(l.a)(this,t),this.database=E()(e).orderBy(["title"])}return Object(p.a)(t,[{key:"search",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=e?this.preprocessPattern(t):t,r=RegExp(n,"i");return this.database.filter((function(t){return r.test(t.title)})).value()}},{key:"preprocessPattern",value:function(t){return t.replace("a","([\xe1a])").replace("e","([\xe9e])").replace("i","([\xedi])").replace("o","([\xf3o])").replace("u","([\xfau])")}}]),t}(),T=function(){function t(e){Object(l.a)(this,t),this.googleSheet=e}return Object(p.a)(t,[{key:"getRepository",value:function(){var t=Object(o.a)(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.shouldReload()?this.reloadLocalDatabase().then((function(t){return new P(t)})):Promise.resolve(new P(JSON.parse(localStorage.getItem("localIndex")))));case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"reloadLocalDatabase",value:function(){var t=Object(o.a)(a.a.mark((function t(){var e;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.googleSheet.rowCount,t.abrupt("return",this.googleSheet.getRows().then((function(t){var n=t.map((function(t){return{title:t.Nombri,position:[t.Latit\u00fa,t.Longit\u00fa],tags:t.Etiquetas.split(",")}}));localStorage.setItem("localIndex",JSON.stringify(n)),localStorage.setItem("localIndexSize",e)})));case 2:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"shouldReload",value:function(){var t=parseInt(localStorage.getItem("localIndexSize"))!==parseInt(this.googleSheet.rowCount);return console.log("Database: reload =".concat(t)),t}}]),t}(),q=new w.GoogleSpreadsheet("1Rd8TQOp2hSBOxhSeAaLeb_faICF2_oAv2-jtn2vgXrY");function R(){return(R=Object(o.a)(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,q.useServiceAccountAuth({client_email:A,private_key:k});case 2:return console.log("Service account: initialized..."),t.next=5,q.loadInfo();case 5:return console.log("Document info: loaded -> ".concat(q.title)),t.next=8,q.sheetsById[0];case 8:return t.abrupt("return",t.sent);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}(function(){return R.apply(this,arguments)})().then((function(t){return new T(t).getRepository()})).then((function(t){return function(t){u.a.render(Object(m.jsx)(c.a.StrictMode,{children:Object(m.jsx)(B,{pointRepository:t,searchBoxContents:""})}),document.getElementById("root"))}(t)}))}},[[419,1,2]]]);
//# sourceMappingURL=main.0d95f155.chunk.js.map